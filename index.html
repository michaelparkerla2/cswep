<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CSWEP - Crypto Dust Sweeper</title>
  <script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      background: #0e0e0e;
      color: white;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
    }
    /* [Include complete original CSS here] */
  </style>
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <a href="#">🧹 Sweep Tool</a>
    <a href="#">📈 Token Dashboard</a>
    <a href="#">💰 Buy CSWEP</a>
    <a href="#">🗂️ Whitepaper</a>
    <a href="#">🧠 FAQ</a>
    <a href="#">📦 Airdrops</a>
    <a href="#">🔐 Security</a>
    <a href="#">🧭 Roadmap</a>
    <a href="#">⚖️ Legal</a>
    <a href="#" title="Coming Soon...">🧰 Dev Tools</a>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <div class="top-banner">CSWEP – The Magic Crypto Sweeper</div>
    <div class="floating-wallet">
      <button class="wallet-btn" onclick="connectWallet()">Connect Wallet</button>
    </div>

    <div class="hero">
      <img src="cswep.logo.png" alt="CSWEP Logo">
      <h1>Scans wallets. Finds crumbs.<br>Swaps to cash — like magic.</h1>
      <p>Recover trapped micro balances from any wallet.</p>
      <button onclick="document.getElementById('sweepSection').scrollIntoView({ behavior: 'smooth' });">Start Sweeping</button>
    </div>

    <main id="sweepSection">
      <h2>Free stuck crypto. Convert to cash. No gas!</h2>
      <p class="subtitle">Sweep dust tokens into real value. Powered by CSWEP.</p>
      <div class="card">
        <div class="scrollable-table">
          <table id="tokenTable">
            <thead>
              <tr><th>Token</th><th>Your Balance</th></tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <button class="sweep-btn" onclick="simulateSweep()">Sweep My Crumbs</button>
      </div>
      <p class="mission-text">
        We use special technology to magically deliver users a cash-out experience — converting trapped micro balances into CSWEP tokens or stablecoins, no gas required.
      </p>
    </main>

    <div class="social-footer">
      <a href="#"><img src="https://img.icons8.com/ios-filled/50/ffffff/twitter.png" alt="X"></a>
      <a href="#"><img src="https://img.icons8.com/ios-filled/50/ffffff/facebook.png" alt="Facebook"></a>
      <a href="#"><img src="https://img.icons8.com/ios-filled/50/ffffff/telegram-app.png" alt="Telegram"></a>
      <a href="#"><img src="https://img.icons8.com/ios-filled/50/ffffff/youtube-play.png" alt="YouTube"></a>
      <a href="#"><img src="https://img.icons8.com/ios-filled/50/ffffff/instagram-new.png" alt="Instagram"></a>
      <a href="#"><img src="https://img.icons8.com/ios-filled/50/ffffff/linkedin.png" alt="LinkedIn"></a>
    </div>
  </div>

  <!-- JavaScript Integration -->
  <script>
    let provider, signer, userAddress;

    async function connectWallet() {
      if (window.ethereum) {
        try {
          provider = new ethers.providers.Web3Provider(window.ethereum);
          await provider.send("eth_requestAccounts", []);
          signer = provider.getSigner();
          userAddress = await signer.getAddress();
          alert("Wallet connected: " + userAddress);
          fetchTokenBalances(userAddress);
        } catch (error) {
          console.error("User rejected the request", error);
          alert("Wallet connection failed.");
        }
      } else {
        alert("MetaMask is not installed. Please install it to use this feature.");
      }
    }

    async function fetchTokenBalances(address) {
      const tokenList = [
        { name: 'ETH (Ethereum)', symbol: 'ETH', decimals: 18 },
        { name: 'USDT', symbol: 'USDT', address: '0xdAC17F958D2ee523a2206206994597C13D831ec7', decimals: 6 },
        // [Include remaining tokens here]
      ];

      const erc20Abi = ["function balanceOf(address) view returns (uint256)", "function decimals() view returns (uint8)"];
      const balances = [];

      const ethBal = await provider.getBalance(address);
      balances.push({ name: 'ETH (Ethereum)', symbol: 'ETH', balance: parseFloat(ethers.utils.formatEther(ethBal)) });

      for (let token of tokenList.slice(1)) {
        const contract = new ethers.Contract(token.address, erc20Abi, provider);
        const raw = await contract.balanceOf(address);
        const formatted = ethers.utils.formatUnits(raw, token.decimals);
        balances.push({ name: token.name, symbol: token.symbol, balance: parseFloat(formatted) });
      }

      renderTokenTable(balances);
    }

    function renderTokenTable(tokens) {
      const tbody = document.querySelector('#tokenTable tbody');
      tbody.innerHTML = '';
      tokens.forEach(t => {
        const row = document.createElement('tr');
        row.className = t.balance > 0 ? '' : 'disabled-row';
        row.innerHTML = `
          <td><input type="checkbox" ${t.balance > 0 ? 'checked' : 'disabled'} /> ${t.name}</td>
          <td>${t.balance.toFixed(6)}</td>
        `;
        tbody.appendChild(row);
      });
    }

    function simulateSweep() {
      const selected = Array.from(document.querySelectorAll('input[type="checkbox"]:checked'));
      const tokensSwept = selected.map(el => el.parentElement.textContent.trim());
      const sweptList = tokensSwept.join(', ');
      alert(`✨ Sweeping crumbs from: ${sweptList}\n\n✅ Success! You reclaimed tiny balances from your wallet.\n\nBETA MODE – No tokens moved.`);
    }

    window.onload = () => renderTokenTable([]);
  </script>
</body>
</html>
